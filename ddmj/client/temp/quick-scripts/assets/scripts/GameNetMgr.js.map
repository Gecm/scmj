{"version":3,"sources":["GameNetMgr.js"],"names":["cc","Class","extends","Component","properties","dataEventHandler","roomId","maxNumOfGames","numOfGames","numOfMJ","seatIndex","seats","turn","button","dingque","chupai","isDingQueing","isHuanSanZhang","gamestate","isOver","dissoveData","reset","curaction","i","length","holds","folds","pengs","angangs","diangangs","wangangs","ready","hued","huanpais","huanpaimethod","clear","dispatchEvent","event","data","emit","getSeatIndexByID","userId","s","userid","isOwner","getSeatByID","seat","getSelfData","getLocalIndex","index","ret","prepareReplay","roomInfo","detailOfGame","id","base_info","baseInfo","seatindex","score","game_seats","console","log","vv","userMgr","conf","type","getWanfa","maxGames","maxFan","strArr","push","hsz","zimo","jiangdui","dianganghua","menqing","tiandihu","join","initHandlers","self","net","addHandler","errcode","roomid","numofgames","errmsg","director","loadScene","name","oldRoomId","online","numofmj","state","chuPai","sd","que","iszimo","huinfo","turnUserID","si","doTurnChange","results","totalscore","endinfo","doHu","pai","doChupai","doMopai","doGuo","info","time","method","gameNetMgr","doPeng","doGang","gangtype","seatData","idx","indexOf","splice","getGangType","cnt","last","connectGameServer","ip","port","onConnectOK","token","sign","send","onConnectFailed","wc","hide","show","connect"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,0BAAiB,IADT;AAERC,gBAAO,IAFC;AAGRC,uBAAc,CAHN;AAIRC,oBAAW,CAJH;AAKRC,iBAAQ,CALA;AAMRC,mBAAU,CAAC,CANH;AAORC,eAAM,IAPE;AAQRC,cAAK,CAAC,CARE;AASRC,gBAAO,CAAC,CATA;AAURC,iBAAQ,CAAC,CAVD;AAWRC,gBAAO,CAAC,CAXA;AAYRC,sBAAa,KAZL;AAaRC,wBAAe,KAbP;AAcRC,mBAAU,EAdF;AAeRC,gBAAO,KAfC;AAgBRC,qBAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBQ,KAHP;;AA+BLC,WAAM,iBAAU;AACZ,aAAKT,IAAL,GAAY,CAAC,CAAb;AACA,aAAKG,MAAL,GAAc,CAAC,CAAf,EACA,KAAKD,OAAL,GAAe,CAAC,CADhB;AAEA,aAAKD,MAAL,GAAc,CAAC,CAAf;AACA,aAAKK,SAAL,GAAiB,EAAjB;AACA,aAAKJ,OAAL,GAAe,CAAC,CAAhB;AACA,aAAKE,YAAL,GAAoB,KAApB;AACA,aAAKC,cAAL,GAAsB,KAAtB;AACA,aAAKK,SAAL,GAAiB,IAAjB;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,KAAKZ,KAAL,CAAWa,MAA9B,EAAsC,EAAED,CAAxC,EAA0C;AACtC,iBAAKZ,KAAL,CAAWY,CAAX,EAAcE,KAAd,GAAsB,EAAtB;AACA,iBAAKd,KAAL,CAAWY,CAAX,EAAcG,KAAd,GAAsB,EAAtB;AACA,iBAAKf,KAAL,CAAWY,CAAX,EAAcI,KAAd,GAAsB,EAAtB;AACA,iBAAKhB,KAAL,CAAWY,CAAX,EAAcK,OAAd,GAAwB,EAAxB;AACA,iBAAKjB,KAAL,CAAWY,CAAX,EAAcM,SAAd,GAA0B,EAA1B;AACA,iBAAKlB,KAAL,CAAWY,CAAX,EAAcO,QAAd,GAAyB,EAAzB;AACA,iBAAKnB,KAAL,CAAWY,CAAX,EAAcT,OAAd,GAAwB,CAAC,CAAzB;AACA,iBAAKH,KAAL,CAAWY,CAAX,EAAcQ,KAAd,GAAsB,KAAtB;AACA,iBAAKpB,KAAL,CAAWY,CAAX,EAAcS,IAAd,GAAqB,KAArB;AACA,iBAAKrB,KAAL,CAAWY,CAAX,EAAcU,QAAd,GAAyB,IAAzB;AACA,iBAAKC,aAAL,GAAqB,CAAC,CAAtB;AACH;AACJ,KAtDI;;AAwDLC,WAAM,iBAAU;AACZ,aAAK9B,gBAAL,GAAwB,IAAxB;AACA,YAAG,KAAKc,MAAL,IAAe,IAAlB,EAAuB;AACnB,iBAAKR,KAAL,GAAa,IAAb;AACA,iBAAKL,MAAL,GAAc,IAAd;AACA,iBAAKC,aAAL,GAAqB,CAArB;AACA,iBAAKC,UAAL,GAAkB,CAAlB;AACH;AACJ,KAhEI;;AAkEL4B,iBAlEK,yBAkESC,KAlET,EAkEeC,IAlEf,EAkEoB;AACrB,YAAG,KAAKjC,gBAAR,EAAyB;AACrB,iBAAKA,gBAAL,CAAsBkC,IAAtB,CAA2BF,KAA3B,EAAiCC,IAAjC;AACH;AACJ,KAtEI;;;AAwELE,sBAAiB,0BAASC,MAAT,EAAgB;AAC7B,aAAI,IAAIlB,IAAI,CAAZ,EAAeA,IAAI,KAAKZ,KAAL,CAAWa,MAA9B,EAAsC,EAAED,CAAxC,EAA0C;AACtC,gBAAImB,IAAI,KAAK/B,KAAL,CAAWY,CAAX,CAAR;AACA,gBAAGmB,EAAEC,MAAF,IAAYF,MAAf,EAAsB;AAClB,uBAAOlB,CAAP;AACH;AACJ;AACD,eAAO,CAAC,CAAR;AACH,KAhFI;;AAkFLqB,aAAQ,mBAAU;AACd,eAAO,KAAKlC,SAAL,IAAkB,CAAzB;AACH,KApFI;;AAsFLmC,iBAAY,qBAASJ,MAAT,EAAgB;AACxB,YAAI/B,YAAY,KAAK8B,gBAAL,CAAsBC,MAAtB,CAAhB;AACA,YAAIK,OAAO,KAAKnC,KAAL,CAAWD,SAAX,CAAX;AACA,eAAOoC,IAAP;AACH,KA1FI;;AA4FLC,iBAAY,uBAAU;AAClB,eAAO,KAAKpC,KAAL,CAAW,KAAKD,SAAhB,CAAP;AACH,KA9FI;;AAgGLsC,mBAAc,uBAASC,KAAT,EAAe;AACzB,YAAIC,MAAM,CAACD,QAAQ,KAAKvC,SAAb,GAAyB,CAA1B,IAA+B,CAAzC;AACA,eAAOwC,GAAP;AACH,KAnGI;;AAqGLC,mBAAc,uBAASC,QAAT,EAAkBC,YAAlB,EAA+B;AACzC,aAAK/C,MAAL,GAAc8C,SAASE,EAAvB;AACA,aAAK3C,KAAL,GAAayC,SAASzC,KAAtB;AACA,aAAKC,IAAL,GAAYyC,aAAaE,SAAb,CAAuB1C,MAAnC;AACA,YAAI2C,WAAWH,aAAaE,SAA5B;AACA,aAAI,IAAIhC,IAAI,CAAZ,EAAeA,IAAI,KAAKZ,KAAL,CAAWa,MAA9B,EAAsC,EAAED,CAAxC,EAA0C;AACtC,gBAAImB,IAAI,KAAK/B,KAAL,CAAWY,CAAX,CAAR;AACAmB,cAAEe,SAAF,GAAclC,CAAd;AACAmB,cAAEgB,KAAF,GAAU,IAAV;AACAhB,cAAEjB,KAAF,GAAU+B,SAASG,UAAT,CAAoBpC,CAApB,CAAV;AACAmB,cAAEf,KAAF,GAAU,EAAV;AACAe,cAAEd,OAAF,GAAY,EAAZ;AACAc,cAAEb,SAAF,GAAc,EAAd;AACAa,cAAEZ,QAAF,GAAa,EAAb;AACAY,cAAEhB,KAAF,GAAU,EAAV;AACAkC,oBAAQC,GAAR,CAAYnB,CAAZ;AACA,gBAAG1C,GAAG8D,EAAH,CAAMC,OAAN,CAActB,MAAd,IAAwBC,EAAEC,MAA7B,EAAoC;AAChC,qBAAKjC,SAAL,GAAiBa,CAAjB;AACH;AACJ;AACD,aAAKyC,IAAL,GAAY;AACRC,kBAAKT,SAASS;AADN,SAAZ;AAGA,YAAG,KAAKD,IAAL,CAAUC,IAAV,IAAkB,IAArB,EAA0B;AACtB,iBAAKD,IAAL,CAAUC,IAAV,IAAkB,MAAlB;AACH;AACJ,KA/HI;AAgIL;AACAC,cAAS,oBAAU;AACf,YAAIF,OAAO,KAAKA,IAAhB;AACA,YAAGA,QAAQA,KAAKG,QAAL,IAAe,IAAvB,IAA+BH,KAAKI,MAAL,IAAa,IAA/C,EAAoD;AAChD,gBAAIC,SAAS,EAAb;AACAA,mBAAOC,IAAP,CAAYN,KAAKG,QAAL,GAAgB,GAA5B;AACAE,mBAAOC,IAAP,CAAYN,KAAKI,MAAL,GAAc,KAA1B;AACA,gBAAGJ,KAAKO,GAAR,EAAY;AACRF,uBAAOC,IAAP,CAAY,KAAZ;AACH;AACD,gBAAGN,KAAKQ,IAAL,IAAa,CAAhB,EAAkB;AACdH,uBAAOC,IAAP,CAAY,MAAZ;AACH,aAFD,MAGI;AACAD,uBAAOC,IAAP,CAAY,MAAZ;AACH;AACD,gBAAGN,KAAKS,QAAR,EAAiB;AACbJ,uBAAOC,IAAP,CAAY,IAAZ;AACH;AACD,gBAAGN,KAAKU,WAAL,IAAoB,CAAvB,EAAyB;AACrBL,uBAAOC,IAAP,CAAY,SAAZ;AACH,aAFD,MAGI;AACAD,uBAAOC,IAAP,CAAY,SAAZ;AACH;AACD,gBAAGN,KAAKW,OAAR,EAAgB;AACZN,uBAAOC,IAAP,CAAY,OAAZ;AACH;AACD,gBAAGN,KAAKY,QAAR,EAAiB;AACbP,uBAAOC,IAAP,CAAY,KAAZ;AACH;AACD,mBAAOD,OAAOQ,IAAP,CAAY,GAAZ,CAAP;AACH;AACD,eAAO,EAAP;AACH,KAlKI;;AAoKLC,kBAAa,wBAAU;AACnB,YAAIC,OAAO,IAAX;AACD;AACC/E,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,cAArB,EAAoC,UAAS3C,IAAT,EAAc;AAC9CsB,oBAAQC,GAAR,CAAYvB,IAAZ;AACA,gBAAGA,KAAK4C,OAAL,KAAiB,CAApB,EAAsB;AAClB,oBAAI5C,OAAOA,KAAKA,IAAhB;AACAyC,qBAAKzE,MAAL,GAAcgC,KAAK6C,MAAnB;AACAJ,qBAAKf,IAAL,GAAY1B,KAAK0B,IAAjB;AACAe,qBAAKxE,aAAL,GAAqB+B,KAAK0B,IAAL,CAAUG,QAA/B;AACAY,qBAAKvE,UAAL,GAAkB8B,KAAK8C,UAAvB;AACAL,qBAAKpE,KAAL,GAAa2B,KAAK3B,KAAlB;AACAoE,qBAAKrE,SAAL,GAAiBqE,KAAKvC,gBAAL,CAAsBxC,GAAG8D,EAAH,CAAMC,OAAN,CAActB,MAApC,CAAjB;AACAsC,qBAAK5D,MAAL,GAAc,KAAd;AACH,aATD,MAUI;AACAyC,wBAAQC,GAAR,CAAYvB,KAAK+C,MAAjB;AACH;AACJ,SAfD;;AAiBArF,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,gBAArB,EAAsC,UAAS3C,IAAT,EAAc;AAChDsB,oBAAQC,GAAR,CAAY,gBAAZ;AACA7D,eAAGsF,QAAH,CAAYC,SAAZ,CAAsB,QAAtB;AACH,SAHD;;AAKAvF,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,aAArB,EAAmC,UAAS3C,IAAT,EAAc;AAC7CyC,iBAAKzE,MAAL,GAAc,IAAd;AACAyE,iBAAKnE,IAAL,GAAY,CAAC,CAAb;AACAmE,iBAAKjE,OAAL,GAAe,CAAC,CAAhB;AACAiE,iBAAK/D,YAAL,GAAoB,KAApB;AACA+D,iBAAKpE,KAAL,GAAa,IAAb;AACH,SAND;;AAQAX,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,kBAArB,EAAwC,UAAS3C,IAAT,EAAc;AACnD,gBAAIG,SAASH,IAAb;AACA,gBAAII,IAAIqC,KAAKlC,WAAL,CAAiBJ,MAAjB,CAAR;AACA,gBAAGC,KAAK,IAAR,EAAa;AACTA,kBAAEC,MAAF,GAAW,CAAX;AACAD,kBAAE8C,IAAF,GAAS,EAAT;;AAEAT,qBAAK3C,aAAL,CAAmB,oBAAnB,EAAwCM,CAAxC;AACH;AACH,SATD;;AAWA1C,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,eAArB,EAAqC,UAAS3C,IAAT,EAAc;AAC/CyC,iBAAKzE,MAAL,GAAc,IAAd;AACAyE,iBAAKnE,IAAL,GAAY,CAAC,CAAb;AACAmE,iBAAKjE,OAAL,GAAe,CAAC,CAAhB;AACAiE,iBAAK/D,YAAL,GAAoB,KAApB;AACA+D,iBAAKpE,KAAL,GAAa,IAAb;AACH,SAND;;AAQAX,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,YAArB,EAAkC,UAAS3C,IAAT,EAAc;AAC5C,gBAAGyC,KAAKzE,MAAL,IAAe,IAAlB,EAAuB;AACnBN,mBAAGsF,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,aAFD,MAGI;AACA,oBAAGR,KAAK5D,MAAL,IAAe,KAAlB,EAAwB;AACpBnB,uBAAG8D,EAAH,CAAMC,OAAN,CAAc0B,SAAd,GAA0BV,KAAKzE,MAA/B;AACAyE,yBAAK3C,aAAL,CAAmB,YAAnB;AACH,iBAHD,MAII;AACA2C,yBAAKzE,MAAL,GAAc,IAAd;AACH;AACJ;AACJ,SAbD;;AAeAN,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,qBAArB,EAA2C,UAAS3C,IAAT,EAAc;AACrD;AACA,gBAAI5B,YAAY4B,KAAKmB,SAArB;AACA,gBAAGsB,KAAKpE,KAAL,CAAWD,SAAX,EAAsBiC,MAAtB,GAA+B,CAAlC,EAAoC;AAChCoC,qBAAKpE,KAAL,CAAWD,SAAX,EAAsBgF,MAAtB,GAA+B,IAA/B;AACH,aAFD,MAGI;AACApD,qBAAKoD,MAAL,GAAc,IAAd;AACAX,qBAAKpE,KAAL,CAAWD,SAAX,IAAwB4B,IAAxB;AACH;;AAEJ;AACGyC,iBAAK3C,aAAL,CAAmB,UAAnB,EAA8B2C,KAAKpE,KAAL,CAAWD,SAAX,CAA9B;AACH,SAbD;;AAeAV,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,iBAArB,EAAuC,UAAS3C,IAAT,EAAc;AACjD;AACA,gBAAIG,SAASH,KAAKK,MAAlB;AACA,gBAAIG,OAAOiC,KAAKlC,WAAL,CAAiBJ,MAAjB,CAAX;AACAK,iBAAK4C,MAAL,GAAcpD,KAAKoD,MAAnB;AACAX,iBAAK3C,aAAL,CAAmB,oBAAnB,EAAwCU,IAAxC;AACH,SAND;;AAQA9C,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,iBAArB,EAAuC,UAAS3C,IAAT,EAAc;AACjD;AACA,gBAAIG,SAASH,KAAKK,MAAlB;AACA,gBAAIG,OAAOiC,KAAKlC,WAAL,CAAiBJ,MAAjB,CAAX;AACAK,iBAAKf,KAAL,GAAaO,KAAKP,KAAlB;;AAEA;AACAgD,iBAAK3C,aAAL,CAAmB,oBAAnB,EAAwCU,IAAxC;AACH,SARD;;AAUA9C,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,iBAArB,EAAuC,UAAS3C,IAAT,EAAc;AACjD,gBAAIQ,OAAOiC,KAAKpE,KAAL,CAAWoE,KAAKrE,SAAhB,CAAX;AACAkD,oBAAQC,GAAR,CAAYvB,IAAZ;AACAQ,iBAAKrB,KAAL,GAAaa,IAAb;;AAEA,iBAAI,IAAIf,IAAI,CAAZ,EAAeA,IAAIwD,KAAKpE,KAAL,CAAWa,MAA9B,EAAsC,EAAED,CAAxC,EAA0C;AACtC,oBAAImB,IAAIqC,KAAKpE,KAAL,CAAWY,CAAX,CAAR;AACA,oBAAGmB,EAAEhB,KAAF,IAAW,IAAd,EAAmB;AACfgB,sBAAEhB,KAAF,GAAU,EAAV;AACH;AACD,oBAAGgB,EAAEf,KAAF,IAAW,IAAd,EAAmB;AACfe,sBAAEf,KAAF,GAAU,EAAV;AACH;AACD,oBAAGe,EAAEd,OAAF,IAAa,IAAhB,EAAqB;AACjBc,sBAAEd,OAAF,GAAY,EAAZ;AACH;AACD,oBAAGc,EAAEb,SAAF,IAAe,IAAlB,EAAuB;AACnBa,sBAAEb,SAAF,GAAc,EAAd;AACH;AACD,oBAAGa,EAAEZ,QAAF,IAAc,IAAjB,EAAsB;AAClBY,sBAAEZ,QAAF,GAAa,EAAb;AACH;AACDY,kBAAEX,KAAF,GAAU,KAAV;AACH;AACL;AACIgD,iBAAK3C,aAAL,CAAmB,YAAnB;AACH,SA1BD;AA2BA;AACApC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,iBAArB,EAAuC,UAAS3C,IAAT,EAAc;AACjDsB,oBAAQC,GAAR,CAAY,kBAAZ;AACAD,oBAAQC,GAAR,CAAYvB,IAAZ;AACAyC,iBAAKlE,MAAL,GAAcyB,IAAd;AACAyC,iBAAKnE,IAAL,GAAYmE,KAAKlE,MAAjB;AACAkE,iBAAK7D,SAAL,GAAiB,OAAjB;AACA;AACA6D,iBAAK3C,aAAL,CAAmB,YAAnB;AACH,SARD;AASA;AACApC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,mBAArB,EAAyC,UAAS3C,IAAT,EAAc;AACnDsB,oBAAQC,GAAR,CAAY,mBAAZ;AACAkB,iBAAK7D,SAAL,GAAiB,SAAjB;;AAEA;AACA6D,iBAAK3C,aAAL,CAAmB,cAAnB;AACH,SAND;AAOA;AACApC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,gBAArB,EAAsC,UAAS3C,IAAT,EAAc;AAChDsB,oBAAQC,GAAR,CAAY,gBAAZ;AACAD,oBAAQC,GAAR,CAAYvB,IAAZ;AACAyC,iBAAKtE,OAAL,GAAe6B,KAAKqD,OAApB;AACAZ,iBAAK7D,SAAL,GAAiBoB,KAAKsD,KAAtB;AACA,gBAAGb,KAAK7D,SAAL,IAAkB,SAArB,EAA+B;AAC3B6D,qBAAK/D,YAAL,GAAoB,IAApB;AACH,aAFD,MAGK,IAAG+D,KAAK7D,SAAL,IAAkB,SAArB,EAA+B;AAChC6D,qBAAK9D,cAAL,GAAsB,IAAtB;AACH;AACD8D,iBAAKnE,IAAL,GAAY0B,KAAK1B,IAAjB;AACAmE,iBAAKlE,MAAL,GAAcyB,KAAKzB,MAAnB;AACAkE,iBAAKhE,MAAL,GAAcuB,KAAKuD,MAAnB;AACAd,iBAAK7C,aAAL,GAAqBI,KAAKJ,aAA1B;AACA,iBAAI,IAAIX,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsB,EAAEA,CAAxB,EAA0B;AACtB,oBAAIuB,OAAOiC,KAAKpE,KAAL,CAAWY,CAAX,CAAX;AACA,oBAAIuE,KAAKxD,KAAK3B,KAAL,CAAWY,CAAX,CAAT;AACAuB,qBAAKrB,KAAL,GAAaqE,GAAGrE,KAAhB;AACAqB,qBAAKpB,KAAL,GAAaoE,GAAGpE,KAAhB;AACAoB,qBAAKlB,OAAL,GAAekE,GAAGlE,OAAlB;AACAkB,qBAAKjB,SAAL,GAAiBiE,GAAGjE,SAApB;AACAiB,qBAAKhB,QAAL,GAAgBgE,GAAGhE,QAAnB;AACAgB,qBAAKnB,KAAL,GAAamE,GAAGnE,KAAhB;AACAmB,qBAAKhC,OAAL,GAAegF,GAAGC,GAAlB;AACAjD,qBAAKd,IAAL,GAAY8D,GAAG9D,IAAf;AACAc,qBAAKkD,MAAL,GAAcF,GAAGE,MAAjB;AACAlD,qBAAKmD,MAAL,GAAcH,GAAGG,MAAjB;AACAnD,qBAAKb,QAAL,GAAgB6D,GAAG7D,QAAnB;AACA,oBAAGV,KAAKwD,KAAKrE,SAAb,EAAuB;AACnBqE,yBAAKjE,OAAL,GAAegF,GAAGC,GAAlB;AACH;AACL;AACH,SAjCD;AAkCA;AACA/F,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,mBAArB,EAAyC,UAAS3C,IAAT,EAAc;AACnDyC,iBAAK/D,YAAL,GAAoB,IAApB;AACA+D,iBAAK9D,cAAL,GAAsB,KAAtB;AACA8D,iBAAK3C,aAAL,CAAmB,cAAnB;AAEH,SALD;;AAOA;AACApC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,EAArB,EAAwB,UAAS3C,IAAT,EAAc,CAGrC,CAHD;;AAKA;AACAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,mBAArB,EAAyC,UAAS3C,IAAT,EAAc;AACnDyC,iBAAK9D,cAAL,GAAsB,IAAtB;AACA8D,iBAAK3C,aAAL,CAAmB,cAAnB;AACH,SAHD;AAIA;AACApC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,qBAArB,EAA2C,UAAS3C,IAAT,EAAc;AACrDyC,iBAAK3C,aAAL,CAAmB,gBAAnB,EAAoCE,IAApC;AACH,SAFD;;AAIAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,kBAArB,EAAwC,UAAS3C,IAAT,EAAc;AAClDyC,iBAAKzD,SAAL,GAAiBgB,IAAjB;AACAsB,oBAAQC,GAAR,CAAYvB,IAAZ;AACAyC,iBAAK3C,aAAL,CAAmB,aAAnB,EAAiCE,IAAjC;AACH,SAJD;AAKA;AACAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,kBAArB,EAAwC,UAAS3C,IAAT,EAAc;AAClDsB,oBAAQC,GAAR,CAAY,kBAAZ;AACA;AACA,gBAAIqC,aAAa5D,IAAjB;AACA,gBAAI6D,KAAKpB,KAAKvC,gBAAL,CAAsB0D,UAAtB,CAAT;AACAnB,iBAAKqB,YAAL,CAAkBD,EAAlB;AACH,SAND;;AAQAnG,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,eAArB,EAAqC,UAAS3C,IAAT,EAAc;AAC/CyC,iBAAKvE,UAAL,GAAkB8B,IAAlB;AACAyC,iBAAK3C,aAAL,CAAmB,UAAnB,EAA8BE,IAA9B;AACH,SAHD;;AAKAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,gBAArB,EAAsC,UAAS3C,IAAT,EAAc;AAChDsB,oBAAQC,GAAR,CAAY,gBAAZ;AACA,gBAAIwC,UAAU/D,KAAK+D,OAAnB;AACA,iBAAI,IAAI9E,IAAI,CAAZ,EAAeA,IAAKwD,KAAKpE,KAAL,CAAWa,MAA/B,EAAuC,EAAED,CAAzC,EAA2C;AACvCwD,qBAAKpE,KAAL,CAAWY,CAAX,EAAcmC,KAAd,GAAsB2C,QAAQ7E,MAAR,IAAkB,CAAlB,GAAqB,CAArB,GAAuB6E,QAAQ9E,CAAR,EAAW+E,UAAxD;AACH;AACDvB,iBAAK3C,aAAL,CAAmB,WAAnB,EAA+BiE,OAA/B;AACA,gBAAG/D,KAAKiE,OAAR,EAAgB;AACZxB,qBAAK5D,MAAL,GAAc,IAAd;AACA4D,qBAAK3C,aAAL,CAAmB,UAAnB,EAA8BE,KAAKiE,OAAnC;AACH;AACDxB,iBAAK1D,KAAL;AACA,iBAAI,IAAIE,IAAI,CAAZ,EAAeA,IAAKwD,KAAKpE,KAAL,CAAWa,MAA/B,EAAuC,EAAED,CAAzC,EAA2C;AACvCwD,qBAAK3C,aAAL,CAAmB,oBAAnB,EAAwC2C,KAAKpE,KAAL,CAAWY,CAAX,CAAxC;AACH;AACJ,SAfD;;AAiBAvB,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,eAArB,EAAqC,UAAS3C,IAAT,EAAc;AAC/CsB,oBAAQC,GAAR,CAAY,eAAZ;AACAkB,iBAAKtE,OAAL,GAAe6B,IAAf;AACA;AACAyC,iBAAK3C,aAAL,CAAmB,UAAnB,EAA8BE,IAA9B;AACH,SALD;;AAOAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,SAArB,EAA+B,UAAS3C,IAAT,EAAc;AACzCsB,oBAAQC,GAAR,CAAY,SAAZ;AACAD,oBAAQC,GAAR,CAAYvB,IAAZ;AACAyC,iBAAKyB,IAAL,CAAUlE,IAAV;AACH,SAJD;;AAMAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,yBAArB,EAA+C,UAAS3C,IAAT,EAAc;AACzD,gBAAIG,SAASH,KAAKG,MAAlB;AACA,gBAAIgE,MAAMnE,KAAKmE,GAAf;AACA,gBAAIN,KAAKpB,KAAKvC,gBAAL,CAAsBC,MAAtB,CAAT;AACAsC,iBAAK2B,QAAL,CAAcP,EAAd,EAAiBM,GAAjB;AACH,SALD;;AAOAzG,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,iBAArB,EAAuC,UAAS3C,IAAT,EAAc;AACjDsB,oBAAQC,GAAR,CAAY,iBAAZ;AACAkB,iBAAK4B,OAAL,CAAa5B,KAAKrE,SAAlB,EAA4B4B,IAA5B;AACH,SAHD;;AAKAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,iBAArB,EAAuC,UAAS3C,IAAT,EAAc;AACjDsB,oBAAQC,GAAR,CAAY,iBAAZ;AACA,gBAAIpB,SAASH,KAAKG,MAAlB;AACA,gBAAIgE,MAAMnE,KAAKmE,GAAf;AACA,gBAAIN,KAAKpB,KAAKvC,gBAAL,CAAsBC,MAAtB,CAAT;AACAsC,iBAAK6B,KAAL,CAAWT,EAAX,EAAcM,GAAd;AACH,SAND;;AAQAzG,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,YAArB,EAAkC,UAAS3C,IAAT,EAAc;AAC5CsB,oBAAQC,GAAR,CAAY,YAAZ;AACAkB,iBAAK3C,aAAL,CAAmB,YAAnB;AACH,SAHD;;AAKApC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,YAArB,EAAkC,UAAS3C,IAAT,EAAc;AAC5CsB,oBAAQC,GAAR,CAAY,YAAZ;AACAkB,iBAAK3C,aAAL,CAAmB,aAAnB,EAAiC,EAACyE,MAAK,IAAN,EAAWC,MAAK,GAAhB,EAAjC;AACH,SAHD;;AAKA9G,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,gBAArB,EAAsC,UAAS3C,IAAT,EAAc;AAChD,gBAAIQ,OAAOiC,KAAKlC,WAAL,CAAiBP,KAAK6D,EAAtB,CAAX;AACArD,iBAAKb,QAAL,GAAgBK,KAAKL,QAArB;AACA8C,iBAAK3C,aAAL,CAAmB,gBAAnB,EAAoCU,IAApC;AACH,SAJD;;AAMA9C,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,wBAArB,EAA8C,UAAS3C,IAAT,EAAc;AACxDsB,oBAAQC,GAAR,CAAY,wBAAZ;AACA,gBAAIgD,OAAO,EAAX;AACA,gBAAIE,SAASzE,KAAKyE,MAAlB;AACA,gBAAGA,UAAU,CAAb,EAAe;AACXF,uBAAO,MAAP;AACH,aAFD,MAGK,IAAGE,UAAU,CAAb,EAAe;AAChBF,uBAAO,MAAP;AACH,aAFI,MAGD;AACAA,uBAAO,MAAP;AACH;AACD9B,iBAAK7C,aAAL,GAAqB6E,MAArB;AACA/G,eAAG8D,EAAH,CAAMkD,UAAN,CAAiB/F,cAAjB,GAAkC,KAAlC;AACA8D,iBAAK3C,aAAL,CAAmB,mBAAnB;AACA2C,iBAAK3C,aAAL,CAAmB,aAAnB,EAAiC,EAACyE,MAAKA,IAAN,EAAWC,MAAK,CAAhB,EAAjC;AACH,SAjBD;;AAmBA9G,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,kBAArB,EAAwC,UAAS3C,IAAT,EAAc;AAClDsB,oBAAQC,GAAR,CAAY,kBAAZ;AACAD,oBAAQC,GAAR,CAAYvB,IAAZ;AACA,gBAAIG,SAASH,KAAKK,MAAlB;AACA,gBAAI8D,MAAMnE,KAAKmE,GAAf;AACA,gBAAIN,KAAKpB,KAAKvC,gBAAL,CAAsBC,MAAtB,CAAT;AACAsC,iBAAKkC,MAAL,CAAYd,EAAZ,EAAe7D,KAAKmE,GAApB;AACH,SAPD;;AASAzG,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,kBAArB,EAAwC,UAAS3C,IAAT,EAAc;AAClDsB,oBAAQC,GAAR,CAAY,kBAAZ;AACAD,oBAAQC,GAAR,CAAYvB,IAAZ;AACA,gBAAIG,SAASH,KAAKK,MAAlB;AACA,gBAAI8D,MAAMnE,KAAKmE,GAAf;AACA,gBAAIN,KAAKpB,KAAKvC,gBAAL,CAAsBC,MAAtB,CAAT;AACAsC,iBAAKmC,MAAL,CAAYf,EAAZ,EAAeM,GAAf,EAAmBnE,KAAK6E,QAAxB;AACH,SAPD;;AASAnH,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,0BAArB,EAAgD,UAAS3C,IAAT,EAAc;AAC1DyC,iBAAK3C,aAAL,CAAmB,qBAAnB,EAAyCE,IAAzC;AACH,SAFD;;AAIAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,0BAArB,EAAgD,UAAS3C,IAAT,EAAc;AAC1D,iBAAI,IAAIf,IAAI,CAAZ,EAAeA,IAAIe,KAAKd,MAAxB,EAAgC,EAAED,CAAlC,EAAoC;AAChCwD,qBAAKpE,KAAL,CAAWY,CAAX,EAAcT,OAAd,GAAwBwB,KAAKf,CAAL,CAAxB;AACH;AACD;AACAwD,iBAAK3C,aAAL,CAAmB,qBAAnB,EAAyCE,IAAzC;AACH,SAND;;AASAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,WAArB,EAAiC,UAAS3C,IAAT,EAAc;AAC3CyC,iBAAK3C,aAAL,CAAmB,WAAnB,EAA+BE,IAA/B;AACH,SAFD;;AAIAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,iBAArB,EAAuC,UAAS3C,IAAT,EAAc;AACjDyC,iBAAK3C,aAAL,CAAmB,iBAAnB,EAAqCE,IAArC;AACH,SAFD;;AAIAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,YAArB,EAAkC,UAAS3C,IAAT,EAAc;AAC5CyC,iBAAK3C,aAAL,CAAmB,YAAnB,EAAgCE,IAAhC;AACH,SAFD;;AAIAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,sBAArB,EAA4C,UAAS3C,IAAT,EAAc;AACtDsB,oBAAQC,GAAR,CAAY,sBAAZ;AACAD,oBAAQC,GAAR,CAAYvB,IAAZ;AACAyC,iBAAK3D,WAAL,GAAmBkB,IAAnB;AACAyC,iBAAK3C,aAAL,CAAmB,iBAAnB,EAAqCE,IAArC;AACH,SALD;;AAOAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,sBAArB,EAA4C,UAAS3C,IAAT,EAAc;AACtDyC,iBAAK3D,WAAL,GAAmB,IAAnB;AACA2D,iBAAK3C,aAAL,CAAmB,iBAAnB,EAAqCE,IAArC;AACH,SAHD;;AAKAtC,WAAG8D,EAAH,CAAMkB,GAAN,CAAUC,UAAV,CAAqB,gBAArB,EAAsC,UAAS3C,IAAT,EAAc;AAChDyC,iBAAK3C,aAAL,CAAmB,WAAnB,EAA+BE,IAA/B;AACH,SAFD;AAGH,KAlhBI;;AAohBLsE,WAAM,eAASlG,SAAT,EAAmB+F,GAAnB,EAAuB;AACzB,YAAIW,WAAW,KAAKzG,KAAL,CAAWD,SAAX,CAAf;AACA,YAAIgB,QAAQ0F,SAAS1F,KAArB;AACAA,cAAM4C,IAAN,CAAWmC,GAAX;AACA,aAAKrE,aAAL,CAAmB,YAAnB,EAAgCgF,QAAhC;AACH,KAzhBI;;AA2hBLT,aAAQ,iBAASjG,SAAT,EAAmB+F,GAAnB,EAAuB;AAC3B,YAAIW,WAAW,KAAKzG,KAAL,CAAWD,SAAX,CAAf;AACA,YAAG0G,SAAS3F,KAAZ,EAAkB;AACd2F,qBAAS3F,KAAT,CAAe6C,IAAf,CAAoBmC,GAApB;AACA,iBAAKrE,aAAL,CAAmB,YAAnB,EAAgC,EAAC1B,WAAUA,SAAX,EAAqB+F,KAAIA,GAAzB,EAAhC;AACH;AACJ,KAjiBI;;AAmiBLC,cAAS,kBAAShG,SAAT,EAAmB+F,GAAnB,EAAuB;AAC5B,aAAK1F,MAAL,GAAc0F,GAAd;AACA,YAAIW,WAAW,KAAKzG,KAAL,CAAWD,SAAX,CAAf;AACA,YAAG0G,SAAS3F,KAAZ,EAAkB;AACd,gBAAI4F,MAAMD,SAAS3F,KAAT,CAAe6F,OAAf,CAAuBb,GAAvB,CAAV;AACAW,qBAAS3F,KAAT,CAAe8F,MAAf,CAAsBF,GAAtB,EAA0B,CAA1B;AACH;AACD,aAAKjF,aAAL,CAAmB,oBAAnB,EAAwC,EAACgF,UAASA,QAAV,EAAmBX,KAAIA,GAAvB,EAAxC;AACH,KA3iBI;;AA6iBLQ,YAAO,gBAASvG,SAAT,EAAmB+F,GAAnB,EAAuB;AAC1B,YAAIW,WAAW,KAAKzG,KAAL,CAAWD,SAAX,CAAf;AACA;AACA,YAAG0G,SAAS3F,KAAZ,EAAkB;AACd,iBAAI,IAAIF,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsB,EAAEA,CAAxB,EAA0B;AACtB,oBAAI8F,MAAMD,SAAS3F,KAAT,CAAe6F,OAAf,CAAuBb,GAAvB,CAAV;AACAW,yBAAS3F,KAAT,CAAe8F,MAAf,CAAsBF,GAAtB,EAA0B,CAA1B;AACH;AACJ;;AAED;AACA,YAAI1F,QAAQyF,SAASzF,KAArB;AACAA,cAAM2C,IAAN,CAAWmC,GAAX;;AAEA,aAAKrE,aAAL,CAAmB,aAAnB,EAAiCgF,QAAjC;AACH,KA5jBI;;AA8jBLI,iBAAY,qBAASJ,QAAT,EAAkBX,GAAlB,EAAsB;AAC9B,YAAGW,SAASzF,KAAT,CAAe2F,OAAf,CAAuBb,GAAvB,KAA+B,CAAC,CAAnC,EAAqC;AACjC,mBAAO,SAAP;AACH,SAFD,MAGI;AACA,gBAAIgB,MAAM,CAAV;AACA,iBAAI,IAAIlG,IAAI,CAAZ,EAAeA,IAAI6F,SAAS3F,KAAT,CAAeD,MAAlC,EAA0C,EAAED,CAA5C,EAA8C;AAC1C,oBAAG6F,SAAS3F,KAAT,CAAeF,CAAf,KAAqBkF,GAAxB,EAA4B;AACxBgB;AACH;AACJ;AACD,gBAAGA,OAAO,CAAV,EAAY;AACR,uBAAO,UAAP;AACH,aAFD,MAGI;AACA,uBAAO,QAAP;AACH;AACJ;AACJ,KAhlBI;;AAklBLP,YAAO,gBAASxG,SAAT,EAAmB+F,GAAnB,EAAuBU,QAAvB,EAAgC;AACnC,YAAIC,WAAW,KAAKzG,KAAL,CAAWD,SAAX,CAAf;;AAEA,YAAG,CAACyG,QAAJ,EAAa;AACTA,uBAAW,KAAKK,WAAL,CAAiBJ,QAAjB,EAA0BX,GAA1B,CAAX;AACH;;AAED,YAAGU,YAAY,SAAf,EAAyB;AACrB,gBAAGC,SAASzF,KAAT,CAAe2F,OAAf,CAAuBb,GAAvB,KAA+B,CAAC,CAAnC,EAAqC;AACjC,oBAAIY,MAAMD,SAASzF,KAAT,CAAe2F,OAAf,CAAuBb,GAAvB,CAAV;AACA,oBAAGY,OAAO,CAAC,CAAX,EAAa;AACTD,6BAASzF,KAAT,CAAe4F,MAAf,CAAsBF,GAAtB,EAA0B,CAA1B;AACH;AACJ;AACDD,qBAAStF,QAAT,CAAkBwC,IAAlB,CAAuBmC,GAAvB;AACH;AACD,YAAGW,SAAS3F,KAAZ,EAAkB;AACd,iBAAI,IAAIF,IAAI,CAAZ,EAAeA,KAAK,CAApB,EAAuB,EAAEA,CAAzB,EAA2B;AACvB,oBAAI8F,MAAMD,SAAS3F,KAAT,CAAe6F,OAAf,CAAuBb,GAAvB,CAAV;AACA,oBAAGY,OAAO,CAAC,CAAX,EAAa;AACT;AACA;AACH;AACDD,yBAAS3F,KAAT,CAAe8F,MAAf,CAAsBF,GAAtB,EAA0B,CAA1B;AACH;AACJ;AACD,YAAGF,YAAY,QAAf,EAAwB;AACpBC,qBAASxF,OAAT,CAAiB0C,IAAjB,CAAsBmC,GAAtB;AACH,SAFD,MAGK,IAAGU,YAAY,UAAf,EAA0B;AAC3BC,qBAASvF,SAAT,CAAmByC,IAAnB,CAAwBmC,GAAxB;AACH;AACD,aAAKrE,aAAL,CAAmB,aAAnB,EAAiC,EAACgF,UAASA,QAAV,EAAmBD,UAASA,QAA5B,EAAjC;AACH,KAnnBI;;AAqnBLX,UAAK,cAASlE,IAAT,EAAc;AACf,aAAKF,aAAL,CAAmB,OAAnB,EAA2BE,IAA3B;AACH,KAvnBI;;AAynBL8D,kBAAa,sBAASD,EAAT,EAAY;AACrB,YAAI7D,OAAO;AACPoF,kBAAK,KAAK9G,IADH;AAEPA,kBAAKuF;AAFE,SAAX;AAIA,aAAKvF,IAAL,GAAYuF,EAAZ;AACA,aAAK/D,aAAL,CAAmB,aAAnB,EAAiCE,IAAjC;AACH,KAhoBI;;AAkoBLqF,uBAAkB,2BAASrF,IAAT,EAAc;AAC5B,aAAKlB,WAAL,GAAmB,IAAnB;AACApB,WAAG8D,EAAH,CAAMkB,GAAN,CAAU4C,EAAV,GAAetF,KAAKsF,EAAL,GAAU,GAAV,GAAgBtF,KAAKuF,IAApC;AACAjE,gBAAQC,GAAR,CAAY7D,GAAG8D,EAAH,CAAMkB,GAAN,CAAU4C,EAAtB;AACA,YAAI7C,OAAO,IAAX;;AAEA,YAAI+C,cAAc,SAAdA,WAAc,GAAU;AACxBlE,oBAAQC,GAAR,CAAY,aAAZ;AACA,gBAAIiC,KAAK;AACLiC,uBAAMzF,KAAKyF,KADN;AAEL5C,wBAAO7C,KAAK6C,MAFP;AAGL2B,sBAAKxE,KAAKwE,IAHL;AAILkB,sBAAK1F,KAAK0F;AAJL,aAAT;AAMA;AACAhI,eAAG8D,EAAH,CAAMkB,GAAN,CAAUiD,IAAV,CAAe,OAAf,EAAuBnC,EAAvB;AACH,SAVD;;AAYA,YAAIoC,kBAAkB,SAAlBA,eAAkB,GAAU;AAC5BtE,oBAAQC,GAAR,CAAY,SAAZ;AACA7D,eAAG8D,EAAH,CAAMqE,EAAN,CAASC,IAAT;AACH,SAHD;AAIApI,WAAG8D,EAAH,CAAMqE,EAAN,CAASE,IAAT,CAAc,QAAd;AACArI,WAAG8D,EAAH,CAAMkB,GAAN,CAAUsD,OAAV,CAAkBR,WAAlB,EAA8BI,eAA9B;AACH;;AAED;AACA;;AAEA;AA/pBK,CAAT","file":"GameNetMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        dataEventHandler:null,\r\n        roomId:null,\r\n        maxNumOfGames:0,\r\n        numOfGames:0,\r\n        numOfMJ:0,\r\n        seatIndex:-1,\r\n        seats:null,\r\n        turn:-1,\r\n        button:-1,\r\n        dingque:-1,\r\n        chupai:-1,\r\n        isDingQueing:false,\r\n        isHuanSanZhang:false,\r\n        gamestate:\"\",\r\n        isOver:false,\r\n        dissoveData:null,\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n    \r\n    reset:function(){\r\n        this.turn = -1;\r\n        this.chupai = -1,\r\n        this.dingque = -1;\r\n        this.button = -1;\r\n        this.gamestate = \"\";\r\n        this.dingque = -1;\r\n        this.isDingQueing = false;\r\n        this.isHuanSanZhang = false;\r\n        this.curaction = null;\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            this.seats[i].holds = [];\r\n            this.seats[i].folds = [];\r\n            this.seats[i].pengs = [];\r\n            this.seats[i].angangs = [];\r\n            this.seats[i].diangangs = [];\r\n            this.seats[i].wangangs = [];\r\n            this.seats[i].dingque = -1;\r\n            this.seats[i].ready = false;\r\n            this.seats[i].hued = false;\r\n            this.seats[i].huanpais = null;\r\n            this.huanpaimethod = -1;\r\n        }\r\n    },\r\n    \r\n    clear:function(){\r\n        this.dataEventHandler = null;\r\n        if(this.isOver == null){\r\n            this.seats = null;\r\n            this.roomId = null;\r\n            this.maxNumOfGames = 0;\r\n            this.numOfGames = 0;        \r\n        }\r\n    },\r\n    \r\n    dispatchEvent(event,data){\r\n        if(this.dataEventHandler){\r\n            this.dataEventHandler.emit(event,data);\r\n        }    \r\n    },\r\n    \r\n    getSeatIndexByID:function(userId){\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            var s = this.seats[i];\r\n            if(s.userid == userId){\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    \r\n    isOwner:function(){\r\n        return this.seatIndex == 0;   \r\n    },\r\n    \r\n    getSeatByID:function(userId){\r\n        var seatIndex = this.getSeatIndexByID(userId);\r\n        var seat = this.seats[seatIndex];\r\n        return seat;\r\n    },\r\n    \r\n    getSelfData:function(){\r\n        return this.seats[this.seatIndex];\r\n    },\r\n    \r\n    getLocalIndex:function(index){\r\n        var ret = (index - this.seatIndex + 4) % 4;\r\n        return ret;\r\n    },\r\n    \r\n    prepareReplay:function(roomInfo,detailOfGame){\r\n        this.roomId = roomInfo.id;\r\n        this.seats = roomInfo.seats;\r\n        this.turn = detailOfGame.base_info.button;\r\n        var baseInfo = detailOfGame.base_info;\r\n        for(var i = 0; i < this.seats.length; ++i){\r\n            var s = this.seats[i];\r\n            s.seatindex = i;\r\n            s.score = null;\r\n            s.holds = baseInfo.game_seats[i];\r\n            s.pengs = [];\r\n            s.angangs = [];\r\n            s.diangangs = [];\r\n            s.wangangs = [];\r\n            s.folds = [];\r\n            console.log(s);\r\n            if(cc.vv.userMgr.userId == s.userid){\r\n                this.seatIndex = i;\r\n            }\r\n        }\r\n        this.conf = {\r\n            type:baseInfo.type,\r\n        }\r\n        if(this.conf.type == null){\r\n            this.conf.type == \"xzdd\";\r\n        }\r\n    },\r\n    //得到玩法\r\n    getWanfa:function(){\r\n        var conf = this.conf;\r\n        if(conf && conf.maxGames!=null && conf.maxFan!=null){\r\n            var strArr = [];\r\n            strArr.push(conf.maxGames + \"局\");\r\n            strArr.push(conf.maxFan + \"番封顶\");\r\n            if(conf.hsz){\r\n                strArr.push(\"换三张\");   \r\n            }\r\n            if(conf.zimo == 1){\r\n                strArr.push(\"自摸加番\");\r\n            }\r\n            else{\r\n                strArr.push(\"自摸加底\");\r\n            }\r\n            if(conf.jiangdui){\r\n                strArr.push(\"将对\");   \r\n            }\r\n            if(conf.dianganghua == 1){\r\n                strArr.push(\"点杠花(自摸)\");   \r\n            }\r\n            else{\r\n                strArr.push(\"点杠花(放炮)\");\r\n            }\r\n            if(conf.menqing){\r\n                strArr.push(\"门清、中张\");   \r\n            }\r\n            if(conf.tiandihu){\r\n                strArr.push(\"天地胡\");   \r\n            }\r\n            return strArr.join(\" \");\r\n        }\r\n        return \"\";\r\n    },\r\n    \r\n    initHandlers:function(){\r\n        var self = this;\r\n       //接受socket服务的的信息\r\n        cc.vv.net.addHandler(\"login_result\",function(data){\r\n            console.log(data);\r\n            if(data.errcode === 0){\r\n                var data = data.data;\r\n                self.roomId = data.roomid;\r\n                self.conf = data.conf;\r\n                self.maxNumOfGames = data.conf.maxGames;\r\n                self.numOfGames = data.numofgames;\r\n                self.seats = data.seats;\r\n                self.seatIndex = self.getSeatIndexByID(cc.vv.userMgr.userId);\r\n                self.isOver = false;\r\n            }\r\n            else{\r\n                console.log(data.errmsg);   \r\n            }\r\n        });\r\n                \r\n        cc.vv.net.addHandler(\"login_finished\",function(data){\r\n            console.log(\"login_finished\");\r\n            cc.director.loadScene(\"mjgame\");\r\n        });\r\n\r\n        cc.vv.net.addHandler(\"exit_result\",function(data){\r\n            self.roomId = null;\r\n            self.turn = -1;\r\n            self.dingque = -1;\r\n            self.isDingQueing = false;\r\n            self.seats = null;\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"exit_notify_push\",function(data){\r\n           var userId = data;\r\n           var s = self.getSeatByID(userId);\r\n           if(s != null){\r\n               s.userid = 0;\r\n               s.name = \"\";\r\n\r\n               self.dispatchEvent(\"user_state_changed\",s);\r\n           }\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"dispress_push\",function(data){\r\n            self.roomId = null;\r\n            self.turn = -1;\r\n            self.dingque = -1;\r\n            self.isDingQueing = false;\r\n            self.seats = null;\r\n        });\r\n                \r\n        cc.vv.net.addHandler(\"disconnect\",function(data){\r\n            if(self.roomId == null){\r\n                cc.director.loadScene(\"hall\");\r\n            }\r\n            else{\r\n                if(self.isOver == false){\r\n                    cc.vv.userMgr.oldRoomId = self.roomId;\r\n                    self.dispatchEvent(\"disconnect\");                    \r\n                }\r\n                else{\r\n                    self.roomId = null;\r\n                }\r\n            }\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"new_user_comes_push\",function(data){\r\n            //console.log(data);\r\n            var seatIndex = data.seatindex;\r\n            if(self.seats[seatIndex].userid > 0){\r\n                self.seats[seatIndex].online = true;\r\n            }\r\n            else{\r\n                data.online = true;\r\n                self.seats[seatIndex] = data;\r\n            }\r\n\r\n         //给客户端mjroom消息\r\n            self.dispatchEvent('new_user',self.seats[seatIndex]);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"user_state_push\",function(data){\r\n            //console.log(data);\r\n            var userId = data.userid;\r\n            var seat = self.getSeatByID(userId);\r\n            seat.online = data.online;\r\n            self.dispatchEvent('user_state_changed',seat);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"user_ready_push\",function(data){\r\n            //console.log(data);\r\n            var userId = data.userid;\r\n            var seat = self.getSeatByID(userId);\r\n            seat.ready = data.ready;\r\n\r\n            //给mjroom发信息\r\n            self.dispatchEvent('user_state_changed',seat);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_holds_push\",function(data){\r\n            var seat = self.seats[self.seatIndex]; \r\n            console.log(data);\r\n            seat.holds = data;\r\n            \r\n            for(var i = 0; i < self.seats.length; ++i){\r\n                var s = self.seats[i]; \r\n                if(s.folds == null){\r\n                    s.folds = [];\r\n                }\r\n                if(s.pengs == null){\r\n                    s.pengs = [];\r\n                }\r\n                if(s.angangs == null){\r\n                    s.angangs = [];\r\n                }\r\n                if(s.diangangs == null){\r\n                    s.diangangs = [];\r\n                }\r\n                if(s.wangangs == null){\r\n                    s.wangangs = [];\r\n                }\r\n                s.ready = false;\r\n            }\r\n        //向MJgame.js发个事件\r\n            self.dispatchEvent('game_holds');\r\n        });\r\n        //接受服务端请求游戏准备开始\r\n        cc.vv.net.addHandler(\"game_begin_push\",function(data){\r\n            console.log('game_action_push');\r\n            console.log(data);\r\n            self.button = data;\r\n            self.turn = self.button;\r\n            self.gamestate = \"begin\";\r\n            //这是给mjgame发的事件\r\n            self.dispatchEvent('game_begin');\r\n        });\r\n        //接受服务端请求开始\r\n        cc.vv.net.addHandler(\"game_playing_push\",function(data){\r\n            console.log('game_playing_push'); \r\n            self.gamestate = \"playing\"; \r\n\r\n            //这是发送给谁啊\r\n            self.dispatchEvent('game_playing');\r\n        });\r\n        //定却\r\n        cc.vv.net.addHandler(\"game_sync_push\",function(data){\r\n            console.log(\"game_sync_push\");\r\n            console.log(data);\r\n            self.numOfMJ = data.numofmj;\r\n            self.gamestate = data.state;\r\n            if(self.gamestate == \"dingque\"){\r\n                self.isDingQueing = true;\r\n            }\r\n            else if(self.gamestate == \"huanpai\"){\r\n                self.isHuanSanZhang = true;\r\n            }\r\n            self.turn = data.turn;\r\n            self.button = data.button;\r\n            self.chupai = data.chuPai;\r\n            self.huanpaimethod = data.huanpaimethod;\r\n            for(var i = 0; i < 4; ++i){\r\n                var seat = self.seats[i];\r\n                var sd = data.seats[i];\r\n                seat.holds = sd.holds;\r\n                seat.folds = sd.folds;\r\n                seat.angangs = sd.angangs;\r\n                seat.diangangs = sd.diangangs;\r\n                seat.wangangs = sd.wangangs;\r\n                seat.pengs = sd.pengs;\r\n                seat.dingque = sd.que;\r\n                seat.hued = sd.hued; \r\n                seat.iszimo = sd.iszimo;\r\n                seat.huinfo = sd.huinfo;\r\n                seat.huanpais = sd.huanpais;\r\n                if(i == self.seatIndex){\r\n                    self.dingque = sd.que;\r\n                }\r\n           }\r\n        });\r\n        //\r\n        cc.vv.net.addHandler(\"game_dingque_push\",function(data){\r\n            self.isDingQueing = true;\r\n            self.isHuanSanZhang = false;\r\n            self.dispatchEvent('game_dingque');\r\n            \r\n        });\r\n\r\n        //日照麻将的玩法\r\n        cc.vv.net.addHandler(\"\",function(data){\r\n                 \r\n\r\n        });\r\n        \r\n        //换牌\r\n        cc.vv.net.addHandler(\"game_huanpai_push\",function(data){\r\n            self.isHuanSanZhang = true;\r\n            self.dispatchEvent('game_huanpai');\r\n        });\r\n        //换杠\r\n        cc.vv.net.addHandler(\"hangang_notify_push\",function(data){\r\n            self.dispatchEvent('hangang_notify',data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_action_push\",function(data){\r\n            self.curaction = data;\r\n            console.log(data);\r\n            self.dispatchEvent('game_action',data);\r\n        });\r\n        //出牌\r\n        cc.vv.net.addHandler(\"game_chupai_push\",function(data){\r\n            console.log('game_chupai_push');\r\n            //console.log(data);\r\n            var turnUserID = data;\r\n            var si = self.getSeatIndexByID(turnUserID);\r\n            self.doTurnChange(si);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_num_push\",function(data){\r\n            self.numOfGames = data;\r\n            self.dispatchEvent('game_num',data);\r\n        });\r\n\r\n        cc.vv.net.addHandler(\"game_over_push\",function(data){\r\n            console.log('game_over_push');\r\n            var results = data.results;\r\n            for(var i = 0; i <  self.seats.length; ++i){\r\n                self.seats[i].score = results.length == 0? 0:results[i].totalscore;\r\n            }\r\n            self.dispatchEvent('game_over',results);\r\n            if(data.endinfo){\r\n                self.isOver = true;\r\n                self.dispatchEvent('game_end',data.endinfo);    \r\n            }\r\n            self.reset();\r\n            for(var i = 0; i <  self.seats.length; ++i){\r\n                self.dispatchEvent('user_state_changed',self.seats[i]);    \r\n            }\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"mj_count_push\",function(data){\r\n            console.log('mj_count_push');\r\n            self.numOfMJ = data;\r\n            //console.log(data);\r\n            self.dispatchEvent('mj_count',data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"hu_push\",function(data){\r\n            console.log('hu_push');\r\n            console.log(data);\r\n            self.doHu(data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_chupai_notify_push\",function(data){\r\n            var userId = data.userId;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.doChupai(si,pai);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_mopai_push\",function(data){\r\n            console.log('game_mopai_push');\r\n            self.doMopai(self.seatIndex,data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"guo_notify_push\",function(data){\r\n            console.log('guo_notify_push');\r\n            var userId = data.userId;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.doGuo(si,pai);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"guo_result\",function(data){\r\n            console.log('guo_result');\r\n            self.dispatchEvent('guo_result');\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"guohu_push\",function(data){\r\n            console.log('guohu_push');\r\n            self.dispatchEvent(\"push_notice\",{info:\"过胡\",time:1.5});\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"huanpai_notify\",function(data){\r\n            var seat = self.getSeatByID(data.si);\r\n            seat.huanpais = data.huanpais;\r\n            self.dispatchEvent('huanpai_notify',seat);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_huanpai_over_push\",function(data){\r\n            console.log('game_huanpai_over_push');\r\n            var info = \"\";\r\n            var method = data.method;\r\n            if(method == 0){\r\n                info = \"换对家牌\";\r\n            }\r\n            else if(method == 1){\r\n                info = \"换下家牌\";\r\n            }\r\n            else{\r\n                info = \"换上家牌\";\r\n            }\r\n            self.huanpaimethod = method;\r\n            cc.vv.gameNetMgr.isHuanSanZhang = false;\r\n            self.dispatchEvent(\"game_huanpai_over\");\r\n            self.dispatchEvent(\"push_notice\",{info:info,time:2});\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"peng_notify_push\",function(data){\r\n            console.log('peng_notify_push');\r\n            console.log(data);\r\n            var userId = data.userid;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.doPeng(si,data.pai);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"gang_notify_push\",function(data){\r\n            console.log('gang_notify_push');\r\n            console.log(data);\r\n            var userId = data.userid;\r\n            var pai = data.pai;\r\n            var si = self.getSeatIndexByID(userId);\r\n            self.doGang(si,pai,data.gangtype);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_dingque_notify_push\",function(data){\r\n            self.dispatchEvent('game_dingque_notify',data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"game_dingque_finish_push\",function(data){\r\n            for(var i = 0; i < data.length; ++i){\r\n                self.seats[i].dingque = data[i];\r\n            }\r\n            //这是像谁发送的\r\n            self.dispatchEvent('game_dingque_finish',data);\r\n        });\r\n        \r\n        \r\n        cc.vv.net.addHandler(\"chat_push\",function(data){\r\n            self.dispatchEvent(\"chat_push\",data);    \r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"quick_chat_push\",function(data){\r\n            self.dispatchEvent(\"quick_chat_push\",data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"emoji_push\",function(data){\r\n            self.dispatchEvent(\"emoji_push\",data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"dissolve_notice_push\",function(data){\r\n            console.log(\"dissolve_notice_push\"); \r\n            console.log(data);\r\n            self.dissoveData = data;\r\n            self.dispatchEvent(\"dissolve_notice\",data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"dissolve_cancel_push\",function(data){\r\n            self.dissoveData = null;\r\n            self.dispatchEvent(\"dissolve_cancel\",data);\r\n        });\r\n        \r\n        cc.vv.net.addHandler(\"voice_msg_push\",function(data){\r\n            self.dispatchEvent(\"voice_msg\",data);\r\n        });\r\n    },\r\n    \r\n    doGuo:function(seatIndex,pai){\r\n        var seatData = this.seats[seatIndex];\r\n        var folds = seatData.folds;\r\n        folds.push(pai);\r\n        this.dispatchEvent('guo_notify',seatData);    \r\n    },\r\n    \r\n    doMopai:function(seatIndex,pai){\r\n        var seatData = this.seats[seatIndex];\r\n        if(seatData.holds){\r\n            seatData.holds.push(pai);\r\n            this.dispatchEvent('game_mopai',{seatIndex:seatIndex,pai:pai});            \r\n        }\r\n    },\r\n    \r\n    doChupai:function(seatIndex,pai){\r\n        this.chupai = pai;\r\n        var seatData = this.seats[seatIndex];\r\n        if(seatData.holds){             \r\n            var idx = seatData.holds.indexOf(pai);\r\n            seatData.holds.splice(idx,1);\r\n        }\r\n        this.dispatchEvent('game_chupai_notify',{seatData:seatData,pai:pai});    \r\n    },\r\n    \r\n    doPeng:function(seatIndex,pai){\r\n        var seatData = this.seats[seatIndex];\r\n        //移除手牌\r\n        if(seatData.holds){\r\n            for(var i = 0; i < 2; ++i){\r\n                var idx = seatData.holds.indexOf(pai);\r\n                seatData.holds.splice(idx,1);\r\n            }                \r\n        }\r\n            \r\n        //更新碰牌数据\r\n        var pengs = seatData.pengs;\r\n        pengs.push(pai);\r\n            \r\n        this.dispatchEvent('peng_notify',seatData);\r\n    },\r\n    \r\n    getGangType:function(seatData,pai){\r\n        if(seatData.pengs.indexOf(pai) != -1){\r\n            return \"wangang\";\r\n        }\r\n        else{\r\n            var cnt = 0;\r\n            for(var i = 0; i < seatData.holds.length; ++i){\r\n                if(seatData.holds[i] == pai){\r\n                    cnt++;\r\n                }\r\n            }\r\n            if(cnt == 3){\r\n                return \"diangang\";\r\n            }\r\n            else{\r\n                return \"angang\";\r\n            }\r\n        }\r\n    },\r\n    \r\n    doGang:function(seatIndex,pai,gangtype){\r\n        var seatData = this.seats[seatIndex];\r\n        \r\n        if(!gangtype){\r\n            gangtype = this.getGangType(seatData,pai);\r\n        }\r\n        \r\n        if(gangtype == \"wangang\"){\r\n            if(seatData.pengs.indexOf(pai) != -1){\r\n                var idx = seatData.pengs.indexOf(pai);\r\n                if(idx != -1){\r\n                    seatData.pengs.splice(idx,1);\r\n                }\r\n            }\r\n            seatData.wangangs.push(pai);      \r\n        }\r\n        if(seatData.holds){\r\n            for(var i = 0; i <= 4; ++i){\r\n                var idx = seatData.holds.indexOf(pai);\r\n                if(idx == -1){\r\n                    //如果没有找到，表示移完了，直接跳出循环\r\n                    break;\r\n                }\r\n                seatData.holds.splice(idx,1);\r\n            }\r\n        }\r\n        if(gangtype == \"angang\"){\r\n            seatData.angangs.push(pai);\r\n        }\r\n        else if(gangtype == \"diangang\"){\r\n            seatData.diangangs.push(pai);\r\n        }\r\n        this.dispatchEvent('gang_notify',{seatData:seatData,gangtype:gangtype});\r\n    },\r\n    \r\n    doHu:function(data){\r\n        this.dispatchEvent('hupai',data);\r\n    },\r\n    \r\n    doTurnChange:function(si){\r\n        var data = {\r\n            last:this.turn,\r\n            turn:si,\r\n        }\r\n        this.turn = si;\r\n        this.dispatchEvent('game_chupai',data);\r\n    },\r\n    \r\n    connectGameServer:function(data){\r\n        this.dissoveData = null;\r\n        cc.vv.net.ip = data.ip + \":\" + data.port;\r\n        console.log(cc.vv.net.ip);\r\n        var self = this;\r\n\r\n        var onConnectOK = function(){\r\n            console.log(\"onConnectOK\");\r\n            var sd = {\r\n                token:data.token,\r\n                roomid:data.roomid,\r\n                time:data.time,\r\n                sign:data.sign,\r\n            };\r\n            //向socket服务器发送信息\r\n            cc.vv.net.send(\"login\",sd);\r\n        };\r\n        \r\n        var onConnectFailed = function(){\r\n            console.log(\"failed.\");\r\n            cc.vv.wc.hide();\r\n        };\r\n        cc.vv.wc.show(\"正在进入房间\");\r\n        cc.vv.net.connect(onConnectOK,onConnectFailed);\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}