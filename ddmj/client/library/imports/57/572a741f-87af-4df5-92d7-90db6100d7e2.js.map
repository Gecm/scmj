{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\Login.js"],"names":["String","prototype","format","args","arguments","length","result","key","reg","RegExp","replace","i","undefined","cc","Class","extends","Component","properties","_mima","_mimaIndex","onLoad","sys","isNative","isMobile","cvs","node","getComponent","Canvas","fitHeight","fitWidth","vv","director","loadScene","http","url","master_url","net","addHandler","console","log","audioMgr","playBGM","os","OS_WINDOWS","find","active","start","account","localStorage","getItem","sign","ret","errcode","userMgr","onAuth","onBtnQuickStartClicked","guestAuth","onBtnWeichatClicked","self","anysdkMgr","login","onBtnMIMAClicked","event"],"mappings":"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","file":"Login.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["String.prototype.format = function(args) { \r\n    if (arguments.length>0) { \r\n        var result = this; \r\n        if (arguments.length == 1 && typeof (args) == \"object\") { \r\n            for (var key in args) { \r\n                var reg=new RegExp (\"({\"+key+\"})\",\"g\"); \r\n                result = result.replace(reg, args[key]); \r\n            } \r\n        } \r\n        else { \r\n            for (var i = 0; i < arguments.length; i++) { \r\n                if(arguments[i]==undefined) { \r\n                    return \"\"; \r\n                } \r\n                else { \r\n                    var reg=new RegExp (\"({[\"+i+\"]})\",\"g\"); \r\n                    result = result.replace(reg, arguments[i]); \r\n                } \r\n            } \r\n        } \r\n        return result; \r\n    } \r\n    else { \r\n        return this; \r\n    } \r\n};\r\n \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _mima:null,\r\n        _mimaIndex:0,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        \r\n        if(!cc.vv){\r\n            cc.director.loadScene(\"loading\");\r\n            return;\r\n        }\r\n        cc.vv.http.url = cc.vv.http.master_url;\r\n        //接受服务器传来的信息\r\n        cc.vv.net.addHandler('push_need_create_role',function(){\r\n            console.log(\"onLoad:push_need_create_role\");\r\n            cc.director.loadScene(\"createrole\");\r\n        });\r\n        \r\n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\r\n        \r\n        this._mima = [\"A\",\"A\",\"B\",\"B\",\"A\",\"B\",\"A\",\"B\",\"A\",\"A\",\"A\",\"B\",\"B\",\"B\"];\r\n        \r\n        if(!cc.sys.isNative || cc.sys.os == cc.sys.OS_WINDOWS){\r\n            cc.find(\"Canvas/btn_yk\").active = true;    \r\n        }\r\n\r\n        cc.find(\"Canvas/btn_yk\").active = true;\r\n    },\r\n    \r\n    start:function(){\r\n        var account =  cc.sys.localStorage.getItem(\"wx_account\");\r\n        var sign = cc.sys.localStorage.getItem(\"wx_sign\");\r\n        if(account != null && sign != null){\r\n            var ret = {\r\n                errcode:0,\r\n                account:account,\r\n                sign:sign\r\n            }\r\n            cc.vv.userMgr.onAuth(ret);\r\n        }   \r\n    },\r\n    \r\n    onBtnQuickStartClicked:function(){\r\n        cc.vv.userMgr.guestAuth();\r\n    },\r\n    \r\n    onBtnWeichatClicked:function(){\r\n        var self = this;\r\n            cc.vv.anysdkMgr.login();\r\n    },\r\n    \r\n    onBtnMIMAClicked:function(event){\r\n        // if(this._mima[this._mimaIndex] == event.target.name){\r\n        //     this._mimaIndex++;\r\n        //     if(this._mimaIndex == this._mima.length){\r\n                cc.find(\"Canvas/btn_yk\").active = true;\r\n        //     }\r\n        // }\r\n        // else{\r\n        //     console.log(\"oh ho~~~\");\r\n        //     this._mimaIndex = 0;\r\n        // }\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}