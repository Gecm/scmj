{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\components/assets\\scripts\\components\\Settings.js"],"names":["cc","Class","extends","Component","properties","_btnYXOpen","_btnYXClose","_btnYYOpen","_btnYYClose","onLoad","vv","node","getChildByName","initButtonHandler","slider","utils","addSlideEvent","refreshVolume","onSlided","parent","name","audioMgr","setSFXVolume","progress","setBGMVolume","btn","addClickEvent","active","sfxVolume","yx","width","getComponent","Slider","bgmVolume","yy","onBtnClicked","event","target","sys","localStorage","removeItem","director","loadScene"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,oBAAW,IAXH;AAYRC,qBAAY,IAZJ;AAaRC,oBAAW,IAbH;AAcRC,qBAAY;AAdJ,KAHP;;AAoBL;AACAC,YAAQ,kBAAY;AAChB,YAAGT,GAAGU,EAAH,IAAS,IAAZ,EAAiB;AACb;AACH;;AAED,aAAKL,UAAL,GAAkB,KAAKM,IAAL,CAAUC,cAAV,CAAyB,SAAzB,EAAoCA,cAApC,CAAmD,aAAnD,CAAlB;AACA,aAAKN,WAAL,GAAmB,KAAKK,IAAL,CAAUC,cAAV,CAAyB,SAAzB,EAAoCA,cAApC,CAAmD,cAAnD,CAAnB;;AAEA,aAAKL,UAAL,GAAkB,KAAKI,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCA,cAAnC,CAAkD,aAAlD,CAAlB;AACA,aAAKJ,WAAL,GAAmB,KAAKG,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCA,cAAnC,CAAkD,cAAlD,CAAnB;;AAEA,aAAKC,iBAAL,CAAuB,KAAKF,IAAL,CAAUC,cAAV,CAAyB,WAAzB,CAAvB;AACA,aAAKC,iBAAL,CAAuB,KAAKF,IAAL,CAAUC,cAAV,CAAyB,UAAzB,CAAvB;;AAGA,aAAKC,iBAAL,CAAuB,KAAKR,UAA5B;AACA,aAAKQ,iBAAL,CAAuB,KAAKP,WAA5B;AACA,aAAKO,iBAAL,CAAuB,KAAKN,UAA5B;AACA,aAAKM,iBAAL,CAAuB,KAAKL,WAA5B;;AAGA,YAAIM,SAAS,KAAKH,IAAL,CAAUC,cAAV,CAAyB,SAAzB,EAAoCA,cAApC,CAAmD,UAAnD,CAAb;AACAZ,WAAGU,EAAH,CAAMK,KAAN,CAAYC,aAAZ,CAA0BF,MAA1B,EAAiC,KAAKH,IAAtC,EAA2C,UAA3C,EAAsD,UAAtD;;AAEA,YAAIG,SAAS,KAAKH,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCA,cAAnC,CAAkD,UAAlD,CAAb;AACAZ,WAAGU,EAAH,CAAMK,KAAN,CAAYC,aAAZ,CAA0BF,MAA1B,EAAiC,KAAKH,IAAtC,EAA2C,UAA3C,EAAsD,UAAtD;;AAEA,aAAKM,aAAL;AACH,KAjDI;;AAmDLC,cAAS,kBAASJ,MAAT,EAAgB;AACrB,YAAGA,OAAOH,IAAP,CAAYQ,MAAZ,CAAmBC,IAAnB,IAA2B,SAA9B,EAAwC;AACpCpB,eAAGU,EAAH,CAAMW,QAAN,CAAeC,YAAf,CAA4BR,OAAOS,QAAnC;AACH,SAFD,MAGK,IAAGT,OAAOH,IAAP,CAAYQ,MAAZ,CAAmBC,IAAnB,IAA2B,QAA9B,EAAuC;AACxCpB,eAAGU,EAAH,CAAMW,QAAN,CAAeG,YAAf,CAA4BV,OAAOS,QAAnC;AACH;AACD,aAAKN,aAAL;AACH,KA3DI;;AA6DLJ,uBAAkB,2BAASY,GAAT,EAAa;AAC3BzB,WAAGU,EAAH,CAAMK,KAAN,CAAYW,aAAZ,CAA0BD,GAA1B,EAA8B,KAAKd,IAAnC,EAAwC,UAAxC,EAAmD,cAAnD;AACH,KA/DI;;AAiELM,mBAAc,yBAAU;;AAEpB,aAAKX,WAAL,CAAiBqB,MAAjB,GAA0B3B,GAAGU,EAAH,CAAMW,QAAN,CAAeO,SAAf,GAA2B,CAArD;AACA,aAAKvB,UAAL,CAAgBsB,MAAhB,GAAyB,CAAC,KAAKrB,WAAL,CAAiBqB,MAA3C;;AAEA,YAAIE,KAAK,KAAKlB,IAAL,CAAUC,cAAV,CAAyB,SAAzB,CAAT;AACA,YAAIkB,QAAQ,MAAM9B,GAAGU,EAAH,CAAMW,QAAN,CAAeO,SAAjC;AACA,YAAIL,WAAWM,GAAGjB,cAAH,CAAkB,UAAlB,CAAf;AACAW,iBAASQ,YAAT,CAAsB/B,GAAGgC,MAAzB,EAAiCT,QAAjC,GAA4CvB,GAAGU,EAAH,CAAMW,QAAN,CAAeO,SAA3D;AACAL,iBAASX,cAAT,CAAwB,UAAxB,EAAoCkB,KAApC,GAA4CA,KAA5C;AACA;;;AAGA,aAAKtB,WAAL,CAAiBmB,MAAjB,GAA0B3B,GAAGU,EAAH,CAAMW,QAAN,CAAeY,SAAf,GAA2B,CAArD;AACA,aAAK1B,UAAL,CAAgBoB,MAAhB,GAAyB,CAAC,KAAKnB,WAAL,CAAiBmB,MAA3C;AACA,YAAIO,KAAK,KAAKvB,IAAL,CAAUC,cAAV,CAAyB,QAAzB,CAAT;AACA,YAAIkB,QAAQ,MAAM9B,GAAGU,EAAH,CAAMW,QAAN,CAAeY,SAAjC;AACA,YAAIV,WAAWW,GAAGtB,cAAH,CAAkB,UAAlB,CAAf;AACAW,iBAASQ,YAAT,CAAsB/B,GAAGgC,MAAzB,EAAiCT,QAAjC,GAA4CvB,GAAGU,EAAH,CAAMW,QAAN,CAAeY,SAA3D;;AAEAV,iBAASX,cAAT,CAAwB,UAAxB,EAAoCkB,KAApC,GAA4CA,KAA5C;AACA;AACH,KAvFI;;AAyFLK,kBAAa,sBAASC,KAAT,EAAe;AACxB,YAAGA,MAAMC,MAAN,CAAajB,IAAb,IAAqB,WAAxB,EAAoC;AAChC,iBAAKT,IAAL,CAAUgB,MAAV,GAAmB,KAAnB;AACH,SAFD,MAGK,IAAGS,MAAMC,MAAN,CAAajB,IAAb,IAAqB,UAAxB,EAAmC;AACpCpB,eAAGsC,GAAH,CAAOC,YAAP,CAAoBC,UAApB,CAA+B,YAA/B;AACAxC,eAAGsC,GAAH,CAAOC,YAAP,CAAoBC,UAApB,CAA+B,SAA/B;AACAxC,eAAGyC,QAAH,CAAYC,SAAZ,CAAsB,OAAtB;AACH,SAJI,MAKA,IAAGN,MAAMC,MAAN,CAAajB,IAAb,IAAqB,aAAxB,EAAsC;AACvCpB,eAAGU,EAAH,CAAMW,QAAN,CAAeC,YAAf,CAA4B,GAA5B;AACA,iBAAKL,aAAL;AACH,SAHI,MAIA,IAAGmB,MAAMC,MAAN,CAAajB,IAAb,IAAqB,cAAxB,EAAuC;AACxCpB,eAAGU,EAAH,CAAMW,QAAN,CAAeC,YAAf,CAA4B,CAA5B;AACA,iBAAKL,aAAL;AACH,SAHI,MAIA,IAAGmB,MAAMC,MAAN,CAAajB,IAAb,IAAqB,aAAxB,EAAsC;AACvCpB,eAAGU,EAAH,CAAMW,QAAN,CAAeG,YAAf,CAA4B,CAA5B;AACA,iBAAKP,aAAL;AACH,SAHI,MAIA,IAAGmB,MAAMC,MAAN,CAAajB,IAAb,IAAqB,cAAxB,EAAuC;AACxCpB,eAAGU,EAAH,CAAMW,QAAN,CAAeG,YAAf,CAA4B,CAA5B;AACA,iBAAKP,aAAL;AACH;AACJ;;AAED;AACA;;AAEA;AAvHK,CAAT","file":"Settings.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\components","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _btnYXOpen:null,\r\n        _btnYXClose:null,\r\n        _btnYYOpen:null,\r\n        _btnYYClose:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(cc.vv == null){\r\n            return;\r\n        }\r\n                \r\n        this._btnYXOpen = this.node.getChildByName(\"yinxiao\").getChildByName(\"btn_yx_open\");\r\n        this._btnYXClose = this.node.getChildByName(\"yinxiao\").getChildByName(\"btn_yx_close\");\r\n        \r\n        this._btnYYOpen = this.node.getChildByName(\"yinyue\").getChildByName(\"btn_yy_open\");\r\n        this._btnYYClose = this.node.getChildByName(\"yinyue\").getChildByName(\"btn_yy_close\");\r\n        \r\n        this.initButtonHandler(this.node.getChildByName(\"btn_close\"));\r\n        this.initButtonHandler(this.node.getChildByName(\"btn_exit\"));\r\n        \r\n        \r\n        this.initButtonHandler(this._btnYXOpen);\r\n        this.initButtonHandler(this._btnYXClose);\r\n        this.initButtonHandler(this._btnYYOpen);\r\n        this.initButtonHandler(this._btnYYClose);\r\n        \r\n\r\n        var slider = this.node.getChildByName(\"yinxiao\").getChildByName(\"progress\");\r\n        cc.vv.utils.addSlideEvent(slider,this.node,\"Settings\",\"onSlided\");\r\n        \r\n        var slider = this.node.getChildByName(\"yinyue\").getChildByName(\"progress\");\r\n        cc.vv.utils.addSlideEvent(slider,this.node,\"Settings\",\"onSlided\");\r\n        \r\n        this.refreshVolume();\r\n    },\r\n    \r\n    onSlided:function(slider){\r\n        if(slider.node.parent.name == \"yinxiao\"){\r\n            cc.vv.audioMgr.setSFXVolume(slider.progress);\r\n        }\r\n        else if(slider.node.parent.name == \"yinyue\"){\r\n            cc.vv.audioMgr.setBGMVolume(slider.progress);\r\n        }\r\n        this.refreshVolume();\r\n    },\r\n    \r\n    initButtonHandler:function(btn){\r\n        cc.vv.utils.addClickEvent(btn,this.node,\"Settings\",\"onBtnClicked\");    \r\n    },\r\n    \r\n    refreshVolume:function(){\r\n        \r\n        this._btnYXClose.active = cc.vv.audioMgr.sfxVolume > 0;\r\n        this._btnYXOpen.active = !this._btnYXClose.active;\r\n        \r\n        var yx = this.node.getChildByName(\"yinxiao\");\r\n        var width = 430 * cc.vv.audioMgr.sfxVolume;\r\n        var progress = yx.getChildByName(\"progress\")\r\n        progress.getComponent(cc.Slider).progress = cc.vv.audioMgr.sfxVolume;\r\n        progress.getChildByName(\"progress\").width = width;  \r\n        //yx.getChildByName(\"btn_progress\").x = progress.x + width;\r\n        \r\n        \r\n        this._btnYYClose.active = cc.vv.audioMgr.bgmVolume > 0;\r\n        this._btnYYOpen.active = !this._btnYYClose.active;\r\n        var yy = this.node.getChildByName(\"yinyue\");\r\n        var width = 430 * cc.vv.audioMgr.bgmVolume;\r\n        var progress = yy.getChildByName(\"progress\");\r\n        progress.getComponent(cc.Slider).progress = cc.vv.audioMgr.bgmVolume; \r\n        \r\n        progress.getChildByName(\"progress\").width = width;\r\n        //yy.getChildByName(\"btn_progress\").x = progress.x + width;\r\n    },\r\n    \r\n    onBtnClicked:function(event){\r\n        if(event.target.name == \"btn_close\"){\r\n            this.node.active = false;\r\n        }\r\n        else if(event.target.name == \"btn_exit\"){\r\n            cc.sys.localStorage.removeItem(\"wx_account\");\r\n            cc.sys.localStorage.removeItem(\"wx_sign\");\r\n            cc.director.loadScene(\"login\");\r\n        }\r\n        else if(event.target.name == \"btn_yx_open\"){\r\n            cc.vv.audioMgr.setSFXVolume(1.0);\r\n            this.refreshVolume(); \r\n        }\r\n        else if(event.target.name == \"btn_yx_close\"){\r\n            cc.vv.audioMgr.setSFXVolume(0);\r\n            this.refreshVolume();\r\n        }\r\n        else if(event.target.name == \"btn_yy_open\"){\r\n            cc.vv.audioMgr.setBGMVolume(1);\r\n            this.refreshVolume();\r\n        }\r\n        else if(event.target.name == \"btn_yy_close\"){\r\n            cc.vv.audioMgr.setBGMVolume(0);\r\n            this.refreshVolume();\r\n        }\r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}